{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\user\\\\Desktop\\\\PrasadData\\\\React\\\\splitit\\\\src\\\\Settlement.js\";\nimport React from \"react\";\n\nclass Settlement extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      participants: this.props.participants,\n      paymentsList: this.props.participants.map((user, i) => {\n        let priceDifference = user.contribution - user.amountPayable;\n        return {\n          id: user.id,\n          name: user.name,\n          priceDifference: priceDifference.toFixed(2)\n        };\n      }),\n      transactions: []\n    };\n    this.createTransaction = this.createTransaction.bind(this);\n    this.init();\n  }\n\n  createTransaction(paymentsList) {\n    let listLength = paymentsList.listLength;\n    let transactions = this.state.transactions;\n    let transaction;\n\n    if (paymentsList[0].priceDifference > Math.abs(paymentsList[listLength - 1].priceDifference)) {\n      transaction = {\n        from: paymentsList[listLength - 1].name,\n        to: paymentsList[0].name,\n        amount: Math.abs(paymentsList[listLength - 1].priceDifference)\n      };\n      paymentsList[0].priceDifference -= Math.abs(paymentsList[listLength - 1].priceDifference);\n      paymentsList.pop();\n    } else if (paymentsList[0].priceDifference < Math.abs(paymentsList[listLength - 1].priceDifference)) {\n      transaction = {\n        from: paymentsList[listLength - 1].name,\n        to: paymentsList[0].name,\n        amount: paymentsList[0].priceDifference\n      };\n      paymentsList[listLength - 1] += paymentsList[0].priceDifference;\n      paymentsList.shift();\n    } else {\n      transaction = {\n        from: paymentsList[listLength - 1].name,\n        to: paymentsList[0].name,\n        amount: paymentsList[0].priceDifference\n      };\n      paymentsList.pop();\n      paymentsList.shift();\n    }\n\n    transactions.push(transaction);\n    this.setState({\n      transactions: transactions\n    });\n    return paymentsList;\n  }\n\n  init() {\n    let paymentsList = this.state.paymentsList;\n\n    while (paymentsList.length > 0) {\n      paymentsList.sort(function (a, b) {\n        return b.priceDifference - a.priceDifference;\n      });\n      paymentsList = this.createTransaction(paymentsList);\n    }\n\n    console.log(this.state);\n  }\n\n  render() {\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 84\n      },\n      __self: this\n    }, \"test\");\n  }\n\n}\n\nexport default Settlement;","map":{"version":3,"sources":["C:\\Users\\user\\Desktop\\PrasadData\\React\\splitit\\src\\Settlement.js"],"names":["React","Settlement","Component","constructor","props","state","participants","paymentsList","map","user","i","priceDifference","contribution","amountPayable","id","name","toFixed","transactions","createTransaction","bind","init","listLength","transaction","Math","abs","from","to","amount","pop","shift","push","setState","length","sort","a","b","console","log","render"],"mappings":"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","sourcesContent":["import React from \"react\";\r\n\r\nclass Settlement extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      participants: this.props.participants,\r\n      paymentsList: this.props.participants.map((user, i) => {\r\n        let priceDifference = user.contribution - user.amountPayable;\r\n        return {\r\n          id: user.id,\r\n          name: user.name,\r\n          priceDifference: priceDifference.toFixed(2)\r\n        };\r\n      }),\r\n      transactions: []\r\n    };\r\n\r\n    this.createTransaction = this.createTransaction.bind(this);\r\n\r\n    this.init();\r\n  }\r\n\r\n  createTransaction(paymentsList) {\r\n    let listLength = paymentsList.listLength;\r\n    let transactions = this.state.transactions;\r\n    let transaction;\r\n    if (\r\n      paymentsList[0].priceDifference >\r\n      Math.abs(paymentsList[listLength - 1].priceDifference)\r\n    ) {\r\n      transaction = {\r\n        from: paymentsList[listLength - 1].name,\r\n        to: paymentsList[0].name,\r\n        amount: Math.abs(paymentsList[listLength - 1].priceDifference)\r\n      };\r\n      paymentsList[0].priceDifference -= Math.abs(\r\n        paymentsList[listLength - 1].priceDifference\r\n      );\r\n      paymentsList.pop();\r\n    } else if (\r\n      paymentsList[0].priceDifference <\r\n      Math.abs(paymentsList[listLength - 1].priceDifference)\r\n    ) {\r\n      transaction = {\r\n        from: paymentsList[listLength - 1].name,\r\n        to: paymentsList[0].name,\r\n        amount: paymentsList[0].priceDifference\r\n      };\r\n      paymentsList[listLength - 1] += paymentsList[0].priceDifference;\r\n      paymentsList.shift();\r\n    } else {\r\n      transaction = {\r\n        from: paymentsList[listLength - 1].name,\r\n        to: paymentsList[0].name,\r\n        amount: paymentsList[0].priceDifference\r\n      };\r\n      paymentsList.pop();\r\n      paymentsList.shift();\r\n    }\r\n\r\n    transactions.push(transaction);\r\n\r\n    this.setState({\r\n      transactions: transactions\r\n    });\r\n\r\n    return paymentsList;\r\n  }\r\n\r\n  init() {\r\n    let paymentsList = this.state.paymentsList;\r\n    while (paymentsList.length > 0) {\r\n      paymentsList.sort(function(a, b) {\r\n        return b.priceDifference - a.priceDifference;\r\n      });\r\n\r\n      paymentsList = this.createTransaction(paymentsList);\r\n    }\r\n    console.log(this.state);\r\n  }\r\n\r\n  render() {\r\n    return <div>test</div>;\r\n  }\r\n}\r\n\r\nexport default Settlement;\r\n"]},"metadata":{},"sourceType":"module"}